#pragma checksum "C:\Projects\OSPI-Systems\OSPI.Voting\Views\Elections\Index.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "eea9d84939a6a09b01ce13dd0f0a7fac081f582a"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Elections_Index), @"mvc.1.0.view", @"/Views/Elections/Index.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "C:\Projects\OSPI-Systems\OSPI.Voting\Views\_ViewImports.cshtml"
using OSPI.Voting;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Projects\OSPI-Systems\OSPI.Voting\Views\_ViewImports.cshtml"
using OSPI.Voting.Models;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"eea9d84939a6a09b01ce13dd0f0a7fac081f582a", @"/Views/Elections/Index.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"247b62a2bdc651d01e4f58f63b873ced4f59b401", @"/Views/_ViewImports.cshtml")]
    public class Views_Elections_Index : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<List<OSPI.Infrastructure.Models.CPositionModel>>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#nullable restore
#line 2 "C:\Projects\OSPI-Systems\OSPI.Voting\Views\Elections\Index.cshtml"
  
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout_User_loggedIn.cshtml";

#line default
#line hidden
#nullable disable
            WriteLiteral(@"

<br />
<div class=""row"">
    <div class=""col-lg-12"">
        <div class=""panel panel-default"">
            <div class=""panel-heading"">
                <div class=""row"">
                    <div class=""col-sm-4""> <h4>Elections Dashboard</h4></div>
                    <div class=""col-sm-6""></div>

                    <div class=""col-sm-2"">
                        <a role=""button"" id=""btnconfirm"" class=""btn btn-primary pull-right""> Save</a>
                    </div>
                </div>
            </div>
            <div class=""panel-body""> 
");
#nullable restore
#line 23 "C:\Projects\OSPI-Systems\OSPI.Voting\Views\Elections\Index.cshtml"
                 foreach (var item in Model)
                {

#line default
#line hidden
#nullable disable
            WriteLiteral("                    <div class=\"section\"");
            BeginWriteAttribute("id", " id=\"", 831, "\"", 852, 1);
#nullable restore
#line 25 "C:\Projects\OSPI-Systems\OSPI.Voting\Views\Elections\Index.cshtml"
WriteAttributeValue("", 836, item.PositionId, 836, 16, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" data-pn=\"");
#nullable restore
#line 25 "C:\Projects\OSPI-Systems\OSPI.Voting\Views\Elections\Index.cshtml"
                                                                   Write(item.PositionName);

#line default
#line hidden
#nullable disable
            WriteLiteral("\">\r\n                        <h5><b>INSTRUCTIONS:</b> Select between <label id=\"chkCount\" class=\"countermin\" data-countermin=\"");
#nullable restore
#line 26 "C:\Projects\OSPI-Systems\OSPI.Voting\Views\Elections\Index.cshtml"
                                                                                                                    Write(item.MinimumVotes);

#line default
#line hidden
#nullable disable
            WriteLiteral("\">");
#nullable restore
#line 26 "C:\Projects\OSPI-Systems\OSPI.Voting\Views\Elections\Index.cshtml"
                                                                                                                                        Write(item.MinimumVotes);

#line default
#line hidden
#nullable disable
            WriteLiteral("</label>  and <label class=\"countermax\" data-countermax=\"");
#nullable restore
#line 26 "C:\Projects\OSPI-Systems\OSPI.Voting\Views\Elections\Index.cshtml"
                                                                                                                                                                                                                   Write(item.MaximumVotes);

#line default
#line hidden
#nullable disable
            WriteLiteral("\">");
#nullable restore
#line 26 "C:\Projects\OSPI-Systems\OSPI.Voting\Views\Elections\Index.cshtml"
                                                                                                                                                                                                                                       Write(item.MaximumVotes);

#line default
#line hidden
#nullable disable
            WriteLiteral("</label> options from the list below. <label style=\"color:red\">* Required</label></h5>\r\n                        <p><span class=\"spncounter\">0</span> of  <span>");
#nullable restore
#line 27 "C:\Projects\OSPI-Systems\OSPI.Voting\Views\Elections\Index.cshtml"
                                                                  Write(item.MaximumVotes);

#line default
#line hidden
#nullable disable
            WriteLiteral("</span> Selected</p>\r\n                        <div class=\"row\">\r\n                            <div class=\"col-lg-6\">\r\n                                <div class=\"form-group\">\r\n                                    <h5><b>");
#nullable restore
#line 31 "C:\Projects\OSPI-Systems\OSPI.Voting\Views\Elections\Index.cshtml"
                                      Write(Html.DisplayFor(modelItem => item.PositionName));

#line default
#line hidden
#nullable disable
            WriteLiteral("</b></h5>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n");
#nullable restore
#line 36 "C:\Projects\OSPI-Systems\OSPI.Voting\Views\Elections\Index.cshtml"
                         foreach (var emp in item.Candidates)
                        {


#line default
#line hidden
#nullable disable
            WriteLiteral("                            <div class=\"row\">\r\n                                <div class=\"col-lg-8\">\r\n                                    <div class=\"row\">\r\n                                        <div class=\"col-sm-1\"><input type=\"checkbox\"");
            BeginWriteAttribute("class", " class=\"", 2037, "\"", 2065, 2);
            WriteAttributeValue("", 2045, "chk_", 2045, 4, true);
#nullable restore
#line 42 "C:\Projects\OSPI-Systems\OSPI.Voting\Views\Elections\Index.cshtml"
WriteAttributeValue("", 2049, item.PositionId, 2049, 16, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" data-cid=\"");
#nullable restore
#line 42 "C:\Projects\OSPI-Systems\OSPI.Voting\Views\Elections\Index.cshtml"
                                                                                                                       Write(emp.CandidateId);

#line default
#line hidden
#nullable disable
            WriteLiteral("\" data-mid=\"");
#nullable restore
#line 42 "C:\Projects\OSPI-Systems\OSPI.Voting\Views\Elections\Index.cshtml"
                                                                                                                                                   Write(emp.MemberId);

#line default
#line hidden
#nullable disable
            WriteLiteral("\" data-cname=\"");
#nullable restore
#line 42 "C:\Projects\OSPI-Systems\OSPI.Voting\Views\Elections\Index.cshtml"
                                                                                                                                                                              Write(emp.CandidateName);

#line default
#line hidden
#nullable disable
            WriteLiteral("\" data-pname=\"");
#nullable restore
#line 42 "C:\Projects\OSPI-Systems\OSPI.Voting\Views\Elections\Index.cshtml"
                                                                                                                                                                                                              Write(item.PositionName);

#line default
#line hidden
#nullable disable
            WriteLiteral("\"></div>\r\n\r\n                                        <div class=\"col-sm-2\"> <img");
            BeginWriteAttribute("src", " src=\"", 2261, "\"", 2284, 1);
#nullable restore
#line 44 "C:\Projects\OSPI-Systems\OSPI.Voting\Views\Elections\Index.cshtml"
WriteAttributeValue("", 2267, emp.MemberNumber, 2267, 17, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" style=\"width:70px\"></div>\r\n                                        <div class=\"col-sm-6\">");
#nullable restore
#line 45 "C:\Projects\OSPI-Systems\OSPI.Voting\Views\Elections\Index.cshtml"
                                                         Write(emp.CandidateName);

#line default
#line hidden
#nullable disable
            WriteLiteral(" </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <br />\r\n");
#nullable restore
#line 50 "C:\Projects\OSPI-Systems\OSPI.Voting\Views\Elections\Index.cshtml"
                        }

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n                    </div>\r\n");
#nullable restore
#line 53 "C:\Projects\OSPI-Systems\OSPI.Voting\Views\Elections\Index.cshtml"
                }

#line default
#line hidden
#nullable disable
            WriteLiteral(@"            </div>
            <!-- /.panel-body -->
        </div>
        <!-- /.panel -->
    </div>
    <!-- /.col-lg-12 -->
</div>
<div id=""myModal"" class=""modal fade"">
    <div class=""modal-dialog modal-confirm"">
        <div class=""modal-content"">
            <div class=""modal-header"">
                <b>Do you want to submit your  votes now ?</b>
            </div>
            <div class=""modal-body"">
                <div class=""row"">

                    <div id=""divtxt"">

                    </div>
                </div>


                </div>
                <div class=""modal-footer"">
                    <div class=""row"">
                        <div class=""col-lg-4"">

                        </div>
                        <div class=""col-lg-4"">

                        </div>
                        <div class=""col-lg-4"">
                            <button type=""button"" id=""btnSave"" class=""btn btn-info"">Yes</button>
                            <button type=""butt");
            WriteLiteral(@"on"" id=""btnNo"" class=""btn  btn-danger"" data-dismiss=""modal"">No</button>

                        </div>

                    </div>


                </div>
            </div>
    </div>
</div>

<script>
    $(function () {
        var test = [];

        
        var flag = true;
        $('input[type=""checkbox""]').click(function () {
            var mainSection = $(this).closest("".section"");
            var className = this.className;
            var counterMin = mainSection.find('.countermin').attr('data-countermin');
            var counterMax = mainSection.find('.countermax').attr('data-countermax');
            var tolatCheckbox = $('.' + className + ':checked').length;
            mainSection.find('.spncounter').html(tolatCheckbox);

        });
        $('#btnconfirm').click(function () {           
            var data = [];
            var pdata = [];
            flag = true;
            $("".section"").each(function (e, v) {     
                debugger
             ");
            WriteLiteral(@"   var counterMin = $(this).find('.countermin').attr('data-countermin');
                var counterMax = $(this).find('.countermax').attr('data-countermax');

                var selectedCB = [];
                var pselectedCB = [];
                var secctionId = $('#' + v.id + "" input[type='checkbox']:checked"");
              var pn=  $(this).attr('data-pn');
                if (secctionId.length >= parseInt(counterMin) && secctionId.length <= parseInt(counterMax)) {
                    $.each(secctionId, function () {
                        selectedCB.push('{""CandidateId"":""' + $(this).attr('data-cid') + '"",""MemberId"":""' + $(this).attr('data-mid') + '""}');
                         pselectedCB.push('{""CandidateName"":""' + $(this).attr('data-cname') + '""}');
                    });
                    data.push('{""PositionId"":""' + v.id + '"",""Candidates"":[' + selectedCB.join("", "") + ']}')
                   
                    pdata.push('{""PositionId"":""' + pn + '"",""CandidatesList"":[' + psele");
            WriteLiteral(@"ctedCB.join("", "") + ']}')
                    
                }
                else {
                    alert('Please check limit of ' + pn + '.')
                    flag = false;                    
                }

            });
            if (flag) {
                data = '[' + data.join("", "") + ']';
                test = data; 
               pdata = '[' + pdata.join("", "") + ']';
                var jsonObj = JSON.parse(pdata);
                $('#divtxt').html("""");
                var  table_body = "" "";

                $.each(jsonObj, function (i, p) { 
                    table_body += ""<div class='col-md-12'>"";
                     table_body += '<b>';
                    table_body += '<p>' + p.PositionId + '</p>';
                    table_body += ""</b>"";
                     table_body += ""</div>"";
                 
                    $.each(p.CandidatesList, function (i, c) { 
                       table_body+=""<div class='col-md-12'>"";
                    t");
            WriteLiteral(@"able_body += '<p>' + c.CandidateName + '</p>';
                     table_body += ""</div>"";
                })
                    //table_body += ""</div>"";
                   
                   
                });
                 $('#divtxt').html(table_body);
                
                $(""#myModal"").modal(""show"");
                //pdata = '[' + pdata.join("", "") + ']';
                //var pdatas = pdata;
                //var i;
                //for (i in pdatas.CandidatesList) {
                //    var data= pdatas.CandidatesList[i] + ""<br>"";
                //}

                //$(""#myModal"").modal(""show"");
                //$.ajax({
                //    type: 'POST',
                //    url: '/Elections/SaveVotes',
                //    data: data,
                //    contentType: ""application/json"",
                //    success: function (data) {
                //        alert(""Record has been successfully inserted."");
                //        location.hre");
            WriteLiteral(@"f = ""/Elections/Results"";
                //    }
                //});
            }

        });
        $('#btnSave').click(function () {
            var model =test;
               $.ajax({
                    type: 'POST',
                    url: '/Elections/SaveVotes',
                    data: model,
                    contentType: ""application/json"",
                    success: function (model) {
                        alert(""Record has been successfully inserted."");
                        location.href = ""/Elections/Results"";
                    }
                });
        });
        $('#btnNo').click(function () {
            $(""#myModal"").modal(""hide"");
        });
    })
</script>
");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<List<OSPI.Infrastructure.Models.CPositionModel>> Html { get; private set; }
    }
}
#pragma warning restore 1591
